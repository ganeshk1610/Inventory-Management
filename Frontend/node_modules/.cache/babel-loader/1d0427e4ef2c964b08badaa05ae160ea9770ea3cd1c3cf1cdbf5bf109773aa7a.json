{"ast":null,"code":"import _slicedToArray from\"C:/Users/FEROZ RAHIL/Desktop/capston/React-Inventory-Management-System/Frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useContext,useCallback}from\"react\";import AddSale from\"../components/AddSale\";import AuthContext from\"../AuthContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Sales(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showSaleModal=_useState2[0],setShowSaleModal=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),sales=_useState4[0],setAllSalesData=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),products=_useState6[0],setAllProducts=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),stores=_useState8[0],setAllStores=_useState8[1];var _useState9=useState(true),_useState10=_slicedToArray(_useState9,2),updatePage=_useState10[0],setUpdatePage=_useState10[1];var authContext=useContext(AuthContext);// Fetching Data of All Sales\nvar fetchSalesData=useCallback(function(){fetch(\"http://localhost:4000/api/sales/get/\".concat(authContext.user)).then(function(response){return response.json();}).then(function(data){setAllSalesData(data);}).catch(function(err){return console.log(err);});},[authContext.user]);// Fetching Data of All Products\nvar fetchProductsData=useCallback(function(){fetch(\"http://localhost:4000/api/product/get/\".concat(authContext.user)).then(function(response){return response.json();}).then(function(data){setAllProducts(data);}).catch(function(err){return console.log(err);});},[authContext.user]);// Fetching Data of All Stores\nvar fetchStoresData=useCallback(function(){fetch(\"http://localhost:4000/api/store/get/\".concat(authContext.user)).then(function(response){return response.json();}).then(function(data){setAllStores(data);});},[authContext.user]);useEffect(function(){fetchSalesData();fetchProductsData();fetchStoresData();},[fetchSalesData,fetchProductsData,fetchStoresData,updatePage]);// Modal for Sale Add\nvar addSaleModalSetting=function addSaleModalSetting(){setShowSaleModal(!showSaleModal);};// Handle Page Update\nvar handlePageUpdate=function handlePageUpdate(){setUpdatePage(!updatePage);};return/*#__PURE__*/_jsx(\"div\",{className:\"col-span-12 lg:col-span-10  flex justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\" flex flex-col gap-5 w-11/12\",children:[showSaleModal&&/*#__PURE__*/_jsx(AddSale,{addSaleModalSetting:addSaleModalSetting,products:products,stores:stores,handlePageUpdate:handlePageUpdate,authContext:authContext}),/*#__PURE__*/_jsxs(\"div\",{className:\"overflow-x-auto rounded-lg border bg-white border-gray-200 \",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between pt-5 pb-3 px-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-4 justify-center items-center \",children:/*#__PURE__*/_jsx(\"span\",{className:\"font-bold\",children:\"Sales\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-4\",children:/*#__PURE__*/_jsx(\"button\",{className:\"bg-blue-500 hover:bg-blue-700 text-white font-bold p-2 text-xs  rounded\",onClick:addSaleModalSetting,children:\"Add Sales\"})})]}),/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y-2 divide-gray-200 text-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"whitespace-nowrap px-4 py-2 text-left font-medium text-gray-900\",children:\"Product Name\"}),/*#__PURE__*/_jsx(\"th\",{className:\"whitespace-nowrap px-4 py-2 text-left font-medium text-gray-900\",children:\"Store Name\"}),/*#__PURE__*/_jsx(\"th\",{className:\"whitespace-nowrap px-4 py-2 text-left font-medium text-gray-900\",children:\"Stock Sold\"}),/*#__PURE__*/_jsx(\"th\",{className:\"whitespace-nowrap px-4 py-2 text-left font-medium text-gray-900\",children:\"Sales Date\"}),/*#__PURE__*/_jsx(\"th\",{className:\"whitespace-nowrap px-4 py-2 text-left font-medium text-gray-900\",children:\"Total Sale Amount\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"divide-y divide-gray-200\",children:sales.map(function(element){var _element$ProductID,_element$StoreID;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"whitespace-nowrap px-4 py-2  text-gray-900\",children:(_element$ProductID=element.ProductID)===null||_element$ProductID===void 0?void 0:_element$ProductID.name}),/*#__PURE__*/_jsx(\"td\",{className:\"whitespace-nowrap px-4 py-2 text-gray-700\",children:(_element$StoreID=element.StoreID)===null||_element$StoreID===void 0?void 0:_element$StoreID.name}),/*#__PURE__*/_jsx(\"td\",{className:\"whitespace-nowrap px-4 py-2 text-gray-700\",children:element.StockSold}),/*#__PURE__*/_jsx(\"td\",{className:\"whitespace-nowrap px-4 py-2 text-gray-700\",children:element.SaleDate}),/*#__PURE__*/_jsxs(\"td\",{className:\"whitespace-nowrap px-4 py-2 text-gray-700\",children:[\"$\",element.TotalSaleAmount]})]},element._id);})})]})]})]})});}export default Sales;","map":{"version":3,"names":["React","useState","useEffect","useContext","useCallback","AddSale","AuthContext","jsx","_jsx","jsxs","_jsxs","Sales","_useState","_useState2","_slicedToArray","showSaleModal","setShowSaleModal","_useState3","_useState4","sales","setAllSalesData","_useState5","_useState6","products","setAllProducts","_useState7","_useState8","stores","setAllStores","_useState9","_useState10","updatePage","setUpdatePage","authContext","fetchSalesData","fetch","concat","user","then","response","json","data","catch","err","console","log","fetchProductsData","fetchStoresData","addSaleModalSetting","handlePageUpdate","className","children","onClick","map","element","_element$ProductID","_element$StoreID","ProductID","name","StoreID","StockSold","SaleDate","TotalSaleAmount","_id"],"sources":["C:/Users/FEROZ RAHIL/Desktop/capston/React-Inventory-Management-System/Frontend/src/pages/Sales.js"],"sourcesContent":["import React, { useState, useEffect, useContext, useCallback } from \"react\";\r\nimport AddSale from \"../components/AddSale\";\r\nimport AuthContext from \"../AuthContext\";\r\n\r\nfunction Sales() {\r\n  const [showSaleModal, setShowSaleModal] = useState(false);\r\n  const [sales, setAllSalesData] = useState([]);\r\n  const [products, setAllProducts] = useState([]);\r\n  const [stores, setAllStores] = useState([]);\r\n  const [updatePage, setUpdatePage] = useState(true);\r\n\r\n  const authContext = useContext(AuthContext);\r\n\r\n  // Fetching Data of All Sales\r\n  const fetchSalesData = useCallback(() => {\r\n    fetch(`http://localhost:4000/api/sales/get/${authContext.user}`)\r\n      .then((response) => response.json())\r\n      .then((data) => {\r\n        setAllSalesData(data);\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }, [authContext.user]);\r\n\r\n  // Fetching Data of All Products\r\n  const fetchProductsData = useCallback(() => {\r\n    fetch(`http://localhost:4000/api/product/get/${authContext.user}`)\r\n      .then((response) => response.json())\r\n      .then((data) => {\r\n        setAllProducts(data);\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }, [authContext.user]);\r\n\r\n  // Fetching Data of All Stores\r\n  const fetchStoresData = useCallback(() => {\r\n    fetch(`http://localhost:4000/api/store/get/${authContext.user}`)\r\n      .then((response) => response.json())\r\n      .then((data) => {\r\n        setAllStores(data);\r\n      });\r\n  }, [authContext.user]);\r\n\r\n  useEffect(() => {\r\n    fetchSalesData();\r\n    fetchProductsData();\r\n    fetchStoresData();\r\n  }, [fetchSalesData, fetchProductsData, fetchStoresData, updatePage]);\r\n\r\n  // Modal for Sale Add\r\n  const addSaleModalSetting = () => {\r\n    setShowSaleModal(!showSaleModal);\r\n  };\r\n\r\n  // Handle Page Update\r\n  const handlePageUpdate = () => {\r\n    setUpdatePage(!updatePage);\r\n  };\r\n\r\n  return (\r\n    <div className=\"col-span-12 lg:col-span-10  flex justify-center\">\r\n      <div className=\" flex flex-col gap-5 w-11/12\">\r\n        {showSaleModal && (\r\n          <AddSale\r\n            addSaleModalSetting={addSaleModalSetting}\r\n            products={products}\r\n            stores={stores}\r\n            handlePageUpdate={handlePageUpdate}\r\n            authContext={authContext}\r\n          />\r\n        )}\r\n        {/* Table  */}\r\n        <div className=\"overflow-x-auto rounded-lg border bg-white border-gray-200 \">\r\n          <div className=\"flex justify-between pt-5 pb-3 px-3\">\r\n            <div className=\"flex gap-4 justify-center items-center \">\r\n              <span className=\"font-bold\">Sales</span>\r\n            </div>\r\n            <div className=\"flex gap-4\">\r\n              <button\r\n                className=\"bg-blue-500 hover:bg-blue-700 text-white font-bold p-2 text-xs  rounded\"\r\n                onClick={addSaleModalSetting}\r\n              >\r\n                Add Sales\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <table className=\"min-w-full divide-y-2 divide-gray-200 text-sm\">\r\n            <thead>\r\n              <tr>\r\n                <th className=\"whitespace-nowrap px-4 py-2 text-left font-medium text-gray-900\">\r\n                  Product Name\r\n                </th>\r\n                <th className=\"whitespace-nowrap px-4 py-2 text-left font-medium text-gray-900\">\r\n                  Store Name\r\n                </th>\r\n                <th className=\"whitespace-nowrap px-4 py-2 text-left font-medium text-gray-900\">\r\n                  Stock Sold\r\n                </th>\r\n                <th className=\"whitespace-nowrap px-4 py-2 text-left font-medium text-gray-900\">\r\n                  Sales Date\r\n                </th>\r\n                <th className=\"whitespace-nowrap px-4 py-2 text-left font-medium text-gray-900\">\r\n                  Total Sale Amount\r\n                </th>\r\n              </tr>\r\n            </thead>\r\n\r\n            <tbody className=\"divide-y divide-gray-200\">\r\n              {sales.map((element) => {\r\n                return (\r\n                  <tr key={element._id}>\r\n                    <td className=\"whitespace-nowrap px-4 py-2  text-gray-900\">\r\n                      {element.ProductID?.name}\r\n                    </td>\r\n                    <td className=\"whitespace-nowrap px-4 py-2 text-gray-700\">\r\n                      {element.StoreID?.name}\r\n                    </td>\r\n                    <td className=\"whitespace-nowrap px-4 py-2 text-gray-700\">\r\n                      {element.StockSold}\r\n                    </td>\r\n                    <td className=\"whitespace-nowrap px-4 py-2 text-gray-700\">\r\n                      {element.SaleDate}\r\n                    </td>\r\n                    <td className=\"whitespace-nowrap px-4 py-2 text-gray-700\">\r\n                      ${element.TotalSaleAmount}\r\n                    </td>\r\n                  </tr>\r\n                );\r\n              })}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Sales;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}