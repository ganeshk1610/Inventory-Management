{"ast":null,"code":"import _slicedToArray from\"C:/Users/FEROZ RAHIL/Desktop/capston/React-Inventory-Management-System/Frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useContext,useCallback}from\"react\";import AddPurchaseDetails from\"../components/AddPurchaseDetails\";import AuthContext from\"../AuthContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function PurchaseDetails(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showPurchaseModal=_useState2[0],setPurchaseModal=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),purchase=_useState4[0],setAllPurchaseData=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),products=_useState6[0],setAllProducts=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),updatePage=_useState8[0],setUpdatePage=_useState8[1];var authContext=useContext(AuthContext);// Fetching Data of All Purchase items\nvar fetchPurchaseData=useCallback(function(){fetch(\"http://localhost:4000/api/purchase/get/\".concat(authContext.user)).then(function(response){return response.json();}).then(function(data){setAllPurchaseData(data);}).catch(function(err){return console.log(err);});},[authContext.user]);// Fetching Data of All Products\nvar fetchProductsData=useCallback(function(){fetch(\"http://localhost:4000/api/product/get/\".concat(authContext.user)).then(function(response){return response.json();}).then(function(data){setAllProducts(data);}).catch(function(err){return console.log(err);});},[authContext.user]);useEffect(function(){fetchPurchaseData();fetchProductsData();},[fetchPurchaseData,fetchProductsData,updatePage]);// Modal for Sale Add\nvar addSaleModalSetting=function addSaleModalSetting(){setPurchaseModal(!showPurchaseModal);};// Handle Page Update\nvar handlePageUpdate=function handlePageUpdate(){setUpdatePage(!updatePage);};return/*#__PURE__*/_jsx(\"div\",{className:\"col-span-12 lg:col-span-10  flex justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\" flex flex-col gap-5 w-11/12\",children:[showPurchaseModal&&/*#__PURE__*/_jsx(AddPurchaseDetails,{addSaleModalSetting:addSaleModalSetting,products:products,handlePageUpdate:handlePageUpdate,authContext:authContext}),/*#__PURE__*/_jsxs(\"div\",{className:\"overflow-x-auto rounded-lg border bg-white border-gray-200 \",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between pt-5 pb-3 px-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-4 justify-center items-center \",children:/*#__PURE__*/_jsx(\"span\",{className:\"font-bold\",children:\"Purchase Details\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-4\",children:/*#__PURE__*/_jsx(\"button\",{className:\"bg-blue-500 hover:bg-blue-700 text-white font-bold p-2 text-xs  rounded\",onClick:addSaleModalSetting,children:\"Add Purchase\"})})]}),/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y-2 divide-gray-200 text-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"whitespace-nowrap px-4 py-2 text-left font-medium text-gray-900\",children:\"Product Name\"}),/*#__PURE__*/_jsx(\"th\",{className:\"whitespace-nowrap px-4 py-2 text-left font-medium text-gray-900\",children:\"Quantity Purchased\"}),/*#__PURE__*/_jsx(\"th\",{className:\"whitespace-nowrap px-4 py-2 text-left font-medium text-gray-900\",children:\"Purchase Date\"}),/*#__PURE__*/_jsx(\"th\",{className:\"whitespace-nowrap px-4 py-2 text-left font-medium text-gray-900\",children:\"Total Purchase Amount\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"divide-y divide-gray-200\",children:purchase.map(function(element){var _element$ProductID;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"whitespace-nowrap px-4 py-2  text-gray-900\",children:(_element$ProductID=element.ProductID)===null||_element$ProductID===void 0?void 0:_element$ProductID.name}),/*#__PURE__*/_jsx(\"td\",{className:\"whitespace-nowrap px-4 py-2 text-gray-700\",children:element.QuantityPurchased}),/*#__PURE__*/_jsx(\"td\",{className:\"whitespace-nowrap px-4 py-2 text-gray-700\",children:new Date(element.PurchaseDate).toLocaleDateString()===new Date().toLocaleDateString()?\"Today\":element.PurchaseDate}),/*#__PURE__*/_jsxs(\"td\",{className:\"whitespace-nowrap px-4 py-2 text-gray-700\",children:[\"$\",element.TotalPurchaseAmount]})]},element._id);})})]})]})]})});}export default PurchaseDetails;","map":{"version":3,"names":["React","useState","useEffect","useContext","useCallback","AddPurchaseDetails","AuthContext","jsx","_jsx","jsxs","_jsxs","PurchaseDetails","_useState","_useState2","_slicedToArray","showPurchaseModal","setPurchaseModal","_useState3","_useState4","purchase","setAllPurchaseData","_useState5","_useState6","products","setAllProducts","_useState7","_useState8","updatePage","setUpdatePage","authContext","fetchPurchaseData","fetch","concat","user","then","response","json","data","catch","err","console","log","fetchProductsData","addSaleModalSetting","handlePageUpdate","className","children","onClick","map","element","_element$ProductID","ProductID","name","QuantityPurchased","Date","PurchaseDate","toLocaleDateString","TotalPurchaseAmount","_id"],"sources":["C:/Users/FEROZ RAHIL/Desktop/capston/React-Inventory-Management-System/Frontend/src/pages/PurchaseDetails.js"],"sourcesContent":["import React, { useState, useEffect, useContext, useCallback } from \"react\";\r\nimport AddPurchaseDetails from \"../components/AddPurchaseDetails\";\r\nimport AuthContext from \"../AuthContext\";\r\n\r\nfunction PurchaseDetails() {\r\n  const [showPurchaseModal, setPurchaseModal] = useState(false);\r\n  const [purchase, setAllPurchaseData] = useState([]);\r\n  const [products, setAllProducts] = useState([]);\r\n  const [updatePage, setUpdatePage] = useState(true);\r\n\r\n  const authContext = useContext(AuthContext);\r\n\r\n  // Fetching Data of All Purchase items\r\n  const fetchPurchaseData = useCallback(() => {\r\n    fetch(`http://localhost:4000/api/purchase/get/${authContext.user}`)\r\n      .then((response) => response.json())\r\n      .then((data) => {\r\n        setAllPurchaseData(data);\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }, [authContext.user]);\r\n\r\n  // Fetching Data of All Products\r\n  const fetchProductsData = useCallback(() => {\r\n    fetch(`http://localhost:4000/api/product/get/${authContext.user}`)\r\n      .then((response) => response.json())\r\n      .then((data) => {\r\n        setAllProducts(data);\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }, [authContext.user]);\r\n\r\n  useEffect(() => {\r\n    fetchPurchaseData();\r\n    fetchProductsData();\r\n  }, [fetchPurchaseData, fetchProductsData, updatePage]);\r\n\r\n  // Modal for Sale Add\r\n  const addSaleModalSetting = () => {\r\n    setPurchaseModal(!showPurchaseModal);\r\n  };\r\n\r\n  // Handle Page Update\r\n  const handlePageUpdate = () => {\r\n    setUpdatePage(!updatePage);\r\n  };\r\n\r\n  return (\r\n    <div className=\"col-span-12 lg:col-span-10  flex justify-center\">\r\n      <div className=\" flex flex-col gap-5 w-11/12\">\r\n        {showPurchaseModal && (\r\n          <AddPurchaseDetails\r\n            addSaleModalSetting={addSaleModalSetting}\r\n            products={products}\r\n            handlePageUpdate={handlePageUpdate}\r\n            authContext={authContext}\r\n          />\r\n        )}\r\n        {/* Table  */}\r\n        <div className=\"overflow-x-auto rounded-lg border bg-white border-gray-200 \">\r\n          <div className=\"flex justify-between pt-5 pb-3 px-3\">\r\n            <div className=\"flex gap-4 justify-center items-center \">\r\n              <span className=\"font-bold\">Purchase Details</span>\r\n            </div>\r\n            <div className=\"flex gap-4\">\r\n              <button\r\n                className=\"bg-blue-500 hover:bg-blue-700 text-white font-bold p-2 text-xs  rounded\"\r\n                onClick={addSaleModalSetting}\r\n              >\r\n                {/* <Link to=\"/inventory/add-product\">Add Product</Link> */}\r\n                Add Purchase\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <table className=\"min-w-full divide-y-2 divide-gray-200 text-sm\">\r\n            <thead>\r\n              <tr>\r\n                <th className=\"whitespace-nowrap px-4 py-2 text-left font-medium text-gray-900\">\r\n                  Product Name\r\n                </th>\r\n                <th className=\"whitespace-nowrap px-4 py-2 text-left font-medium text-gray-900\">\r\n                  Quantity Purchased\r\n                </th>\r\n                <th className=\"whitespace-nowrap px-4 py-2 text-left font-medium text-gray-900\">\r\n                  Purchase Date\r\n                </th>\r\n                <th className=\"whitespace-nowrap px-4 py-2 text-left font-medium text-gray-900\">\r\n                  Total Purchase Amount\r\n                </th>\r\n              </tr>\r\n            </thead>\r\n\r\n            <tbody className=\"divide-y divide-gray-200\">\r\n              {purchase.map((element) => {\r\n                return (\r\n                  <tr key={element._id}>\r\n                    <td className=\"whitespace-nowrap px-4 py-2  text-gray-900\">\r\n                      {element.ProductID?.name}\r\n                    </td>\r\n                    <td className=\"whitespace-nowrap px-4 py-2 text-gray-700\">\r\n                      {element.QuantityPurchased}\r\n                    </td>\r\n                    <td className=\"whitespace-nowrap px-4 py-2 text-gray-700\">\r\n                      {new Date(element.PurchaseDate).toLocaleDateString() ===\r\n                      new Date().toLocaleDateString()\r\n                        ? \"Today\"\r\n                        : element.PurchaseDate}\r\n                    </td>\r\n                    <td className=\"whitespace-nowrap px-4 py-2 text-gray-700\">\r\n                      ${element.TotalPurchaseAmount}\r\n                    </td>\r\n                  </tr>\r\n                );\r\n              })}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PurchaseDetails;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}